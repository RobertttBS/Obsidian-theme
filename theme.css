/* å¼•å…¥å­—é«”ï¼šåŒæ™‚å¼•å…¥ Source Serif 4, Lora, PT Serif ä»¥åŠ Noto Serif TC */
@import url('https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Noto+Serif+TC:wght@300;400;700&family=PT+Serif:wght@400;700&family=Source+Serif+4:opsz,wght@8..60,400;8..60,700&display=swap');

/* ===============================================================
   1. è‡ªå®šç¾©è‰²ç¥¨ (User Color Palette) - åˆ†ç‚ºæ·ºè‰²/æ·±è‰²
   =============================================================== */

/* --- â˜€ï¸ æ·ºè‰²æ¨¡å¼ï¼šæ±çª¯ç‚ºé«”ï¼Œé’èŠ±ç‚ºç”¨ --- */
.theme-light {
  /* === åŸºåº• === */
  --user-bg-white:        #F2F7F7;
  --user-bg-pink-pale:    #E6F0F0;
  --user-bg-pink-soft:    #DEEBEB;
  --user-bg-pink-deep:    #D1E3E3;
  --user-bg-blockquote:   #e0f0f0;
  --user-active-line:     #e5eded99;

  /* === æ–‡å­—èˆ‡ç²—é«” === */
  --user-text-main:       #2c3e50;
  --user-text-muted:      #5D7290;
  --user-text-faint:      #8FA4C4;
  /* ç²—é«”ï¼šä½¿ç”¨æ·±é‚ƒçš„æ™®é­¯å£«è— */
  --user-text-bold:       #1A2F45; 

  /* === æ¨™é¡Œæ¼¸å±¤ (é’èŠ±æ¿ƒæ·¡) === */
  --h1-gradient:          #1C4E80; /* æ¿ƒè±”è˜‡éº»é›¢é’ */
  --h2-gradient:          #346c9c; /* ä¸­èª¿é’èŠ± */
  --h3-gradient:          #5D8AA8; /* æ·ºèª¿è—ç° */

  /* === å¼·èª¿èˆ‡é€£çµ === */
  --user-accent-main:     #346c9c;
  --user-accent-strong:   #B22222; /* é‡‰è£¡ç´… (åƒ…ç”¨æ–¼å¼·èª¿/è­¦ç¤º) */
  --user-accent-highlight:#FAEBD7;

  --user-link-internal:   #4c9677;
  --user-link-external:   #4A90E2;

  /* === ä»‹é¢ === */
  --user-border-light:    #B0C4C4;
  --user-selection:       rgba(255, 213, 0, 0.4);

  /* === Callout å°ˆç”¨è‰²ç³» === */
  --user-accent-tip:      #74bfbb;
  --user-accent-success:  #6B8E23;
  --user-accent-warning:  #D4AF37; /* ä¿ç•™åŸæœ¬çš„é‡‘é»ƒè‰²çµ¦æ–‡å­— highlighter ç”¨ */
  --user-accent-info:     #53789E;
  --user-accent-error:    #B22222;
  --user-accent-quote:    #929292;
  --user-accent-example:  #6A5ACD;
  --user-accent-background: #9B59B6;

  --user-theme-pop:       #E0806C;

  --shadow-layer-1: rgba(0, 0, 0, 0.08);
  --shadow-layer-2: rgba(0, 0, 0, 0.04);

  /* --- 3D æµ®å‹•é™°å½± (æ±çª¯æº«æ½¤æ„Ÿ) --- */
  --float-highlight: inset 0 1.5px 0 0 rgba(255, 255, 255, 0.7);
  --float-lowlight: inset 0 -1px 0 0 rgba(0, 0, 0, 0.05);
  --float-shadow-1: 0 1px 2px rgba(0, 0, 0, 0.06); 
  --float-shadow-2: 0 3px 6px -2px rgba(28, 78, 128, 0.15);

  /* HSL è½‰æ›çµæœï¼šè‰²ç›¸ 0 (ç´…), é£½å’Œåº¦ 68%, äº®åº¦ 42% */
  --accent-h: 0;
  --accent-s: 68%;
  --accent-l: 42%;
  
  /* é‡æ–°å®£å‘Šä»¥ç¢ºä¿ç”Ÿæ•ˆ */
  --interactive-accent: hsl(var(--accent-h), var(--accent-s), var(--accent-l));
  --interactive-accent-hover: hsl(var(--accent-h), var(--accent-s), calc(var(--accent-l) + 5%));

  /* inline-code æ¨£å¼ */
  --user-inline-code-bg: rgba(0, 0, 0, 0.06);
  --user-inline-code-text: #B31D1D;

  /* --color-accent-1: #4C97DB; /* æœƒç›´æ¥è“‹åˆ°æŸäº›æ¨£å¼çš„é¡è‰² */

/* æ–‡å­—ï¼šä½¿ç”¨é£½å’Œçš„èµ¤ç´…/éµé½ç´…ï¼Œå°æ¯”èƒŒæ™¯çš„é’è—è‰² */
  --user-tag-color:            #C0392B; 
  /* Hover æ–‡å­—ï¼šè½‰ç‚ºæ›´é®®è±”çš„èƒ­è„‚ç´… */
  --user-tag-color-hover:      #E74C3C;
  
  /* èƒŒæ™¯ï¼šå¸¶æœ‰ç²‰æ©˜èª¿çš„æ·ºç´…ï¼Œåƒå®£ç´™ä¸Šçš„ç¡ƒç ‚æšˆæŸ“ */
  --user-tag-background:       #FADBD8; 
  /* Hover èƒŒæ™¯ï¼šåŠ å¼·é£½å’Œåº¦ï¼Œè®Šæˆæº«æš–çš„ææ¡ƒè‰² */
  --user-tag-background-hover: #F5CBA7;
}

/* --- ğŸŒ™ æ·±è‰²æ¨¡å¼ï¼šé’èŠ±ç‚ºæµ·ï¼Œæ±ç“·ç‚ºæ˜Ÿ --- */
.theme-dark {
  /* === åŸºåº• === */
  --user-bg-white:        #0F1626;
  --user-bg-pink-pale:    #162138;
  --user-bg-pink-soft:    #1C2945;
  --user-bg-pink-deep:    #253555;
  --user-bg-blockquote:   #2b3952;
  --user-active-line:     #17213a;

  /* === æ–‡å­— === */
  --user-text-main:       #F0F8FF;
  --user-text-muted:      #C0D4D4;
  --user-text-faint:      #5F7A7A;
  --user-text-bold:       #DCD0B3; /* æµæ²™é‡‘ */

  /* === æ¨™é¡Œæ¼¸å±¤ === */
  --h1-gradient:          #8CD1D1;
  --h2-gradient:          #7CC4C4;
  --h3-gradient:          #6DB7B7;

  /* === å¼·èª¿èˆ‡é€£çµ === */
  --user-accent-main:     #7CC5C5;
  --user-accent-strong:   #8A0908;
  --user-accent-highlight:#2F4F4F;

  --user-link-internal:   #A2D99E;
  --user-link-external:   #6495ED;

  /* === ä»‹é¢ === */
  --user-border-light:    #3A5F5F;
  --user-selection:       rgba(255, 213, 0, 0.4);

  /* === Callout å°ˆç”¨è‰²ç³» (æ–°å¢/æ·±è‰²é©é…) === */
  --user-accent-tip:      #55e9cc;
  --user-accent-success:  #538731;
  --user-accent-warning:  rgb(255, 149, 20);
  --user-accent-info:     #1A6598;
  --user-accent-error:    #f32f2f;
  --user-accent-quote:    #d2d0d0;
  --user-accent-example:  #9370DB;
  --user-accent-background: #AF7AC5;

  --user-theme-pop:       #FF9E8B;

  --shadow-layer-1: rgba(130, 209, 209, 0.15);
  --shadow-layer-2: rgba(0, 0, 0, 0.5);

  --float-highlight: inset 0 1px 0 0 rgba(255, 255, 255, 0.2);
  --float-lowlight: inset 0 -1px 0 0 rgba(0, 0, 0, 0.2);
  --float-shadow-1: 0 1px 2px rgba(0, 0, 0, 0.4); 
  --float-shadow-2: 0 4px 8px -2px rgba(0, 0, 0, 0.5);

  /* HSL è½‰æ›çµæœï¼šè‰²ç›¸ 359 (ç´…), é£½å’Œåº¦ 89%, äº®åº¦ 29% */
  --accent-h: 359;
  --accent-s: 89%;
  --accent-l: 29%; 

  /* âš ï¸ æ³¨æ„ï¼šäº®åº¦ 29% åœ¨æ·±è‰²èƒŒæ™¯ä¸‹å¯èƒ½ç•¥é¡¯é»¯æ·¡
     å¦‚æœä¸å¤ æ˜é¡¯ï¼Œå¯ä»¥è©¦è‘—æŠŠä¸Šé¢çš„ --accent-l æ”¹æˆ 40% æˆ– 50% */

  /* é‡æ–°å®£å‘Šä»¥ç¢ºä¿ç”Ÿæ•ˆ */
  --interactive-accent: hsl(var(--accent-h), var(--accent-s), var(--accent-l));
  --interactive-accent-hover: hsl(var(--accent-h), var(--accent-s), calc(var(--accent-l) + 5%));

  --user-inline-code-bg: var(--user-bg-pink-deep);
  --user-inline-code-text: #FF7878;

  /* --color-accent-1: #4C97DB; /* æœƒç›´æ¥è“‹åˆ°æŸäº›æ¨£å¼çš„é¡è‰² */

/* æ–‡å­—ï¼šæ˜äº®çš„ç¥ç€é‡‘ï¼Œåœ¨æ·±è‰²èƒŒæ™¯æ¥µç‚ºçªå‡º */
  --user-tag-color:            #FFD700;
  /* Hover æ–‡å­—ï¼šè½‰ç‚ºæ›´æš–çš„æ©™é‡‘è‰²ï¼Œå¢åŠ ç†±åº¦æ„Ÿ */
  --user-tag-color-hover:      #FFC300;

  /* èƒŒæ™¯ï¼šä½¿ç”¨åŠé€æ˜çš„æ·±æ£•é‡‘è‰²ï¼Œæ¨¡æ“¬é‡‘æ¼†åº•è‰² */
  --user-tag-background:       rgba(255, 215, 0, 0.15);
  /* Hover èƒŒæ™¯ï¼šæé«˜äº®åº¦å’Œä¸é€æ˜åº¦ï¼Œç”¢ç”Ÿå…‰æšˆæ„Ÿ */
  --user-tag-background-hover: rgba(255, 215, 0, 0.25);
}

/* ===============================================================
   2. æ ¸å¿ƒç³»çµ±è®Šæ•¸å°æ‡‰ (System Mappings)
   =============================================================== */
body {
  /* --- æ¨™é¡Œé¡è‰² --- */
  --h1-color: var(--h1-gradient);
  --h2-color: var(--h2-gradient);
  --h3-color: var(--h3-gradient);
  --h4-color: var(--user-text-muted);
  --h5-color: var(--user-text-muted);
  --h6-color: var(--user-text-faint);

  /* --- é€£çµèˆ‡èƒŒæ™¯ --- */
  --link-color:           var(--user-link-internal);
  --link-external-color:  var(--user-link-external);
  --background-primary:       var(--user-bg-white);
  --background-primary-alt:   var(--user-bg-pink-pale); 
  --background-secondary:     var(--user-bg-pink-soft);
  --background-secondary-alt: var(--user-bg-pink-deep);

  /* --- ä»‹é¢ --- */
  --titlebar-background:          var(--user-bg-pink-soft);
  --titlebar-background-focused:  var(--user-bg-pink-soft);
  --ribbon-background:            var(--user-bg-pink-soft);
  --ribbon-background-collapsed:  var(--user-bg-pink-soft);
  --tab-container-background:     var(--user-bg-pink-soft);

  --scrollbar-bg: transparent;
  --scrollbar-thumb-bg: var(--user-accent-main);

  /* --- æ–‡å­— --- */
  --text-normal: var(--user-text-main);
  --text-muted:  var(--user-text-muted);
  --text-faint:  var(--user-text-faint);

  /* --- äº’å‹• --- */
  --text-selection:           var(--user-selection) !important;
  --text-highlight-bg:        var(--user-accent-highlight);

  /* --- é‚Šæ¡† --- */
  --background-modifier-border:       var(--user-border-light);
  --background-modifier-border-hover: var(--user-accent-main);

  /* --- ç•¶å‰ç·¨è¼¯è¡Œ --- */
  .markdown-source-view.mod-cm6 .cm-line.cm-active {
    background-color: var(--user-active-line) !important;
    border-radius: 4px;
  }

  /* --- é€£çµèˆ‡åˆ—è¡¨ --- */
  --link-external-decoration: none;
  --link-decoration: none;

  /* checklist */
  --checklist-done-decoration: none; /* å»é™¤å‹¾é¸å¾Œçš„ line-through */
  --checklist-done-color: var(--text-normal); /* å‹¾é¸å¾Œç¶­æŒåŸæ¨£ */

  --radius-sm: 12px; /* --- åŸºç¤è¨­å®šèˆ‡åœ“è§’ --- */
  --font-medium: 550; /* ä¸­ç­‰å­—é‡ */
    
  /* --- Blockquotes è®Šæ•¸ (ç”¨æ–¼æµ®å‹•å¡ç‰‡æ•ˆæœ) --- */
  --blockquote-border-thickness: 0; /* ç§»é™¤å·¦å´é‚Šæ¡† */

  --embed-border-start: none;
  --embed-padding: 0 1.25em 0 0;

  /* --- Tags æ¨£å¼ --- */
  --tag-color: var(--user-tag-color);
  --tag-color-hover: var(--user-tag-color-hover);
  --tag-background: var(--user-tag-background);
  --tag-background-hover: var(--user-tag-background-hover);
}

/* =================================================================
   3. å…ƒç´ æ¨£å¼è¦†è“‹ (Element Overrides)
   ================================================================= */

/* ç²—é«”å­— (Bold) */
strong, b, .cm-strong {
  color: var(--user-text-bold) !important;
  font-weight: 600;
}

/* åˆ—è¡¨ (Lists) */
.list-bullet:after,
.cm-formatting-list-ul {
  color: var(--user-accent-main) !important;
}
.cm-formatting-list-ol {
  color: var(--user-accent-main) !important;
}
ol > li::marker {
  color: var(--user-accent-main) !important;
  font-weight: bold;
}

/* é€£çµæ‡¸åœ */
a:hover, .internal-link:hover, .external-link:hover, .cm-link:hover, .cm-url:hover {
  background-color: var(--user-bg-pink-pale);
  text-decoration: none;
}

/* Tags & Marks */
.tag, .cm-hashtag {
  background-color: var(--user-tag-background) !important;
  color: var(--user-tag-color) !important;
}
mark {
  background-color: var(--user-tag-background);
  color: var(--user-tag-color);
}

/* Checkbox */
input[type="checkbox"] {
  border-color: var(--user-accent-main);
  appearance: none; 
  -webkit-appearance: none;
  border-width: 1px;
  border-style: solid;
  border-radius: 4px;
}
input[type="checkbox"]:checked {
  background-position: center;
  background-repeat: no-repeat;
  box-shadow: inset 0 0 2px var(--user-bg-white);
}

/* å»é™¤ external-link çš„ icon */
.external-link {
  background-image: none;
  padding-right: 0px;
}

/* ===============================================================
   4. ç¨‹å¼ç¢¼èˆ‡è¡¨æ ¼
   =============================================================== */
.markdown-preview-view pre code,
.cm-s-obsidian pre.HyperMD-codeblock {
  background-color: var(--user-bg-pink-pale) !important;
  color: var(--user-text-main) !important;
  border: 1px solid var(--user-bg-pink-deep);
}

.markdown-preview-view table {
  border-color: var(--user-border-light);
}
.markdown-preview-view table thead tr > th {
  background-color: var(--user-bg-pink-deep);
  color: var(--user-text-main);
  border-bottom-color: var(--user-accent-main);
}
.markdown-preview-view table tbody tr:nth-child(even) {
  background-color: var(--user-bg-pink-pale);
}

/* ===============================================================
   5. ä»‹é¢å¾®èª¿ & Scrollbar
   =============================================================== */
.nav-file-title.is-active,
.nav-file-title:hover {
  background-color: var(--user-bg-pink-pale);
  box-shadow: inset 4px 0 0 0 var(--user-accent-strong);
}

.collapse-icon {
  color: var(--user-theme-pop) !important;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 10px;
  height: 6px;
  background-color: transparent;
}
::-webkit-scrollbar-thumb {
  background-color: var(--user-accent-strong) !important;
  border-radius: 6px;
  border: 2px solid transparent;
  background-clip: content-box;
}
::-webkit-scrollbar-track {
  background-color: transparent;
}
::-webkit-scrollbar-thumb:hover {
  background-color: var(--user-accent-main);
}

/* ===============================================================
   6. Graph View
   =============================================================== */
.theme-dark .graph-view.color-fill,
.theme-light .graph-view.color-fill { color: var(--user-text-muted); }
.graph-view.color-circle { color: var(--user-accent-main); }
.graph-view.color-line { color: var(--user-border-light); }
.graph-view.color-text { color: var(--user-text-main); }

/* ===============================================================
   7. Callout é€šç”¨è¨­å®š (3D å¯¦é«”æ„Ÿ)
   =============================================================== */
.callout {
	word-break: break-word;     /* è®“é•·å–®å­—åœ¨é‚Šç•Œè™•æ–·è¡Œ */
    overflow-wrap: anywhere;    /* å¼·åˆ¶é•·ç¶²å€æˆ–ç„¡ç©ºç™½å­—ä¸²åœ¨ä»»ä½•åœ°æ–¹æ–·è¡Œ */
    white-space: normal;        /* ç¢ºä¿æ–‡å­—æ­£å¸¸æ›è¡Œ */
    max-width: 100%;            /* ç¢ºä¿å¯¬åº¦ä¸è¶…éçˆ¶å®¹å™¨ */
    box-sizing: border-box;     /* ç¢ºä¿ Padding ä¸æœƒå°è‡´å¯¬åº¦è¨ˆç®—éŒ¯èª¤ */

    overflow: visible !important;
    margin: 0.6em 2px !important;
    border: none !important; 
    border-radius: 10px !important; 
    
    /* å…‰å½±å †ç–Šï¼šé«˜å…‰ + å…§ç¸®åº•å½± + è²¼åœ°å½± + æ“´æ•£å½± */
    box-shadow: 
        var(--float-highlight),
        var(--float-lowlight), 
        var(--float-shadow-1), 
        var(--float-shadow-2) !important;

    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

/* æ·ºè‰²æ¨¡å¼ï¼šé‡‰é¢æ„Ÿæ¼¸å±¤ */
.theme-light .callout {
    background-image: linear-gradient(180deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 100%);
    border: 1px solid rgba(255,255,255, 0.4) !important;
}

/* æ·±è‰²æ¨¡å¼ï¼šå¾®å¼±å…‰æ„Ÿ */
.theme-dark .callout {
    background-image: linear-gradient(180deg, rgba(255,255,255,0.02) 0%, rgba(0,0,0,0.1) 100%);
    border: 1px solid rgba(255,255,255, 0.05) !important;
}

/* æ‡¸åœæ•ˆæœ */
.callout:hover {
    transform: translateY(-1px);
    box-shadow: 
        var(--float-highlight),
        var(--float-lowlight),
        0 2px 4px rgba(0,0,0,0.1),
        0 6px 12px -2px rgba(0,0,0,0.15) !important;
}

/* å…§éƒ¨ Padding */
.callout-title { padding: 10px 14px 6px 14px; }
.callout-content { padding: 0 14px 14px 14px; }

/* ===============================================================
   8. Callout é¡è‰²å…¨é¢æ˜ å°„ (Color Mappings)
   =============================================================== */

/* --- ğŸ”¹ é’è‰² (Cyan) ---
   Group: Abstract
   Aliases: summary, tldr
   Group: Tip
   Aliases: hint, important
*/
.callout:is([data-callout="abstract"], [data-callout="summary"], [data-callout="tldr"], [data-callout="tip"], [data-callout="hint"], [data-callout="important"]) {
    --callout-color: var(--user-accent-tip);
    --callout-icon: "lucide-lightbulb"; /* é è¨­åœ–ç¤ºï¼Œå¯è¢« Obsidian å…§å»ºè¦†è“‹ */
    background-color: color-mix(in srgb, var(--user-accent-tip) 25%, transparent) !important;
}

/* Group: Note, Info, Todo */
.callout:is([data-callout="note"], [data-callout="info"], [data-callout="todo"]) {
    --callout-color: var(--user-accent-info);
    background-color: color-mix(in srgb, var(--user-accent-info) 25%, transparent) !important;
}

/* Group: Success, Aliases: check, done */
.callout:is([data-callout="success"], [data-callout="check"], [data-callout="done"]) {
    --callout-color: var(--user-accent-success);
    background-color: color-mix(in srgb, var(--user-accent-success) 25%, transparent) !important;
}

/*
   Group: Question (help, faq)
   Group: Warning (caution, attention)
*/
.callout:is([data-callout="question"], [data-callout="help"], [data-callout="faq"], [data-callout="warning"], [data-callout="caution"], [data-callout="attention"]) {
    --callout-color: var(--user-accent-warning);
    background-color: color-mix(in srgb, var(--user-accent-warning) 25%, transparent) !important;
}

/*
   Group: Failure (fail, missing)
   Group: Danger (error, bug)
*/
.callout:is([data-callout="failure"], [data-callout="fail"], [data-callout="missing"], [data-callout="danger"], [data-callout="error"], [data-callout="bug"]) {
    --callout-color: var(--user-accent-error);
    background-color: color-mix(in srgb, var(--user-accent-error) 25%, transparent) !important;
}

/*
   Group: Quote
   Aliases: cite
*/
.callout:is([data-callout="quote"], [data-callout="cite"]) {
    --callout-color: var(--user-accent-background);
    background-color: color-mix(in srgb, var(--user-accent-quote) 25%, transparent) !important;
}

.callout:is([data-callout="example"], [data-callout="e.g."]) {
    --callout-color: var(--user-accent-example);
    background-color: color-mix(in srgb, var(--user-accent-example) 25%, transparent) !important;
}

.callout[data-callout="quote"] .callout-content {
    font-family: serif; /* å¢åŠ æ›¸å·æ°£ */
}

/* ===============================================================
   9. å…¶ä»–ç´°ç¯€ (Misc)
   =============================================================== */
/* .cm-hashtag-begin { color: var(--user-accent-strong) !important; font-weight: bold; } /* æš«æ™‚ç§»é™¤ edit view çš„ tag æ¨£å¼ */
/* .cm-hashtag-end { color: var(--user-tag-color) !important; background-color: var(--user-tag-background);} /* æš«æ™‚ç§»é™¤ edit view çš„ tag æ¨£å¼ */
.workspace-tab-header.is-active { box-shadow: inset 0 2px 0 0 var(--user-accent-strong); }
.cm-footref, .cm-formatting-link, .external-link-icon { color: var(--user-accent-strong) !important; }

/* æ°´å¹³ç·š (Horizontal Rule) */
.markdown-preview-view hr,
hr {
  border: none;
  height: 1px;
  background-color: var(--user-accent-strong);
  opacity: 1;
}

/* æœå°‹çµæœé«˜äº®ï¼Œé…åˆ dynamic highlighter plugin */
.cm-s-obsidian span.cm-matched-string,
.markdown-source-view.mod-cm6 .cm-s-obsidian span.cm-matched-string {
  background-color: rgba(255, 215, 0, 0.4); /* é‡‘é»ƒè‰²èƒŒæ™¯ */
  text-decoration: none; /* ç§»é™¤åº•ç·š */
  color: inherit; /* é¿å…æ–‡å­—é¡è‰²è¢« other æ¨£å¼è¦†è“‹ */
  border-radius: 3px;
  padding-top: 2px;
  padding-bottom: 2px;
}

/* ===================================================
 ä¿®æ”¹ Obsidian é è¦½è¦–çª— (Popover) çš„å°ºå¯¸
 =================================================== */
.popover.hover-popover {
    /* -- å¯¬åº¦è¨­å®š -- */
    width: 600px;  /* æ‚¨æƒ³è¦çš„å¯¬åº¦ï¼Œé è¨­é€šå¸¸ç´„ç‚º 400px */
    /* max-width: 80vw; /* é˜²æ­¢åœ¨å°è¢å¹•ä¸Šè¶…å‡ºé‚Šç•Œ */

    /* -- é«˜åº¦è¨­å®š -- */
    height: 500px; /* å›ºå®šé«˜åº¦ */
    /* max-height: 70vh; /* æœ€å¤§é«˜åº¦é™åˆ¶ */
}

/* ç¢ºä¿å…§éƒ¨åµŒå…¥å…§å®¹é©æ‡‰æ–°çš„é«˜åº¦ */
.popover.hover-popover .markdown-embed {
    height: 100% !important;
    max-height: none !important;
    width: 100% !important;
    Max-width: none !important;
}

/* (é¸ç”¨) èª¿æ•´é è¦½è¦–çª—å…§çš„åœ–ç‰‡å¤§å°é™åˆ¶ï¼Œé¿å…åœ–ç‰‡éå¤§ */
.popover.hover-popover img {
    max-width: 100%;
}

/* èª¿æ•´ "source" property çš„ icon */
.metadata-property[data-property-key="source"] .metadata-property-icon svg {
  mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='size-6'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25' /%3E%3C/svg%3E") no-repeat center;
  -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='size-6'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25' /%3E%3C/svg%3E") no-repeat center;
  color: var(--icon-color);
  background-color: var(--icon-color);
}


/* ===================================================
 èª¿æ•´ Obsidian Canvas ç¯€é»è¢«é¸å–æ™‚çš„æ¨£å¼
 =================================================== */
.canvas-node.is-selected .canvas-node-container, .canvas-node.is-focused .canvas-node-container {
  border-color: var(--user-accent-strong);
}

.canvas-selection.mod-group-selection {
  border-width: 3px;
  border-radius: 3px;
  border-color: var(--user-accent-strong);
  pointer-events: initial;
}

/* ===============================================================
   Blockquote 3D å¯¦é«”åŒ– (å®Œå…¨å¾©åˆ» Callout æ¨£å¼)
   =============================================================== */
/* --- 1. é–±è®€æ¨¡å¼ (Reading View) - å®Œç¾çš„ 3D ç›’è£ --- */
.markdown-preview-view blockquote {
    word-break: break-word;
    overflow-wrap: anywhere;
    white-space: normal;
    max-width: 100%;
    box-sizing: border-box;
    margin: 0.6em 2px !important;
    
    /* å»é™¤ Obsidian é è¨­çš„å¼•ç”¨ç›´ç·š */
    border-left: none !important; 
    
    /* çµ±ä¸€ Padding (å– Callout æ¨™é¡Œèˆ‡å…§å®¹çš„ä¸­é–“å€¼) */
    padding: 12px 16px !important;
    
    /* æ ¸å¿ƒï¼š3D å¯¦é«”æ„Ÿ (åœ“è§’ + é™°å½±) */
    border-radius: 10px !important;
    box-shadow: 
        var(--float-highlight),
        var(--float-lowlight), 
        var(--float-shadow-1), 
        var(--float-shadow-2) !important;
        
    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

/* --- 2. å…‰å½±èˆ‡æè³ªè¨­å®š (åˆ†æ·º/æ·±è‰²æ¨¡å¼) --- */

/* â˜€ï¸ æ·ºè‰²æ¨¡å¼ï¼šæ±çª¯é‡‰é¢æ„Ÿ */
.theme-light .markdown-preview-view blockquote {
    /* èƒŒæ™¯æ¼¸å±¤ */
    background-image: linear-gradient(180deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 100%);
    background-color: var(--user-bg-blockquote); /* ç¢ºä¿æœ‰åº•è‰² */
    
    /* ç»ç’ƒæ„Ÿé‚Šæ¡† */
    border: 1px solid rgba(255,255,255, 0.4) !important;
    
    /* æ–‡å­—é¡è‰² */
    color: var(--user-text-main);
}

/* ğŸŒ™ æ·±è‰²æ¨¡å¼ï¼šå¾®å¼±å…‰æ„Ÿ */
.theme-dark .markdown-preview-view blockquote {
    background-image: linear-gradient(180deg, rgba(255,255,255,0.02) 0%, rgba(0,0,0,0.1) 100%);
    background-color: var(--user-bg-blockquote);
    border: 1px solid rgba(255,255,255, 0.05) !important;
    color: var(--user-text-main);
}

/* --- 3. æ‡¸åœæµ®å‹•æ•ˆæœ (Hover Effect) --- */
.markdown-preview-view blockquote:hover {
    transform: translateY(-1px);
    box-shadow: 
        var(--float-highlight),
        var(--float-lowlight),
        0 2px 4px rgba(0,0,0,0.1),
        0 6px 12px -2px rgba(0,0,0,0.15) !important;
}

/* æ³¨æ„ï¼šç·¨è¼¯æ¨¡å¼ç„¡æ³•åšæˆã€Œå–®ä¸€ç›’å­ã€ï¼Œå› æ­¤æˆ‘å€‘åªåŒæ­¥ã€ŒèƒŒæ™¯è‰²ã€èˆ‡ã€Œæ–‡å­—è‰²ã€ï¼Œ
   ä¸¦ä¿ç•™å·¦å´ç·šæ¢ï¼Œè®“å®ƒåœ¨ç·¨è¼¯æ™‚çœ‹èµ·ä¾†æ•´æ½”ï¼Œä¸æœƒåƒæ–·è£‚çš„ç©æœ¨ã€‚
*/
.markdown-source-view.mod-cm6 .HyperMD-quote {
    background-color: var(--user-bg-blockquote) !important;
    color: var(--user-text-main);
}

/*
 * 1. ç·¨è¼¯æ¨¡å¼ (Live Preview) çš„ Inline Code 
 * 2. é–±è®€æ¨¡å¼çš„ Inline Code (ä½¿ç”¨ :not(pre) > code æ’é™¤ code block)
 *
 * [è¨»] ä½¿ç”¨ !important ç¢ºä¿è¦†è“‹ä¸»é¡Œé è¨­æ¨£å¼
 */
body .cm-s-obsidian span.cm-inline-code,
body .markdown-preview-view :not(pre) > code,
code {
    font-family: var(--font-monospace) !important; /* ä½¿ç”¨ Obsidian çš„ç­‰å¯¬å­—é«”è®Šæ•¸ */
    background-color: var(--user-inline-code-bg);
    color: var(--user-inline-code-text) !important;
    font-size: 0.9em !important; /* ç•¥å¾®ç¸®å°å­—é«” */
    padding: 2px 5px !important; /* ä¸Šä¸‹ 2px, å·¦å³ 5px */
    border-radius: 5px !important; /* åœ“è§’ */
    text-shadow: none !important; /* ç§»é™¤ä¸»é¡Œå¯èƒ½è‡ªå¸¶çš„æ–‡å­—é™°å½± */
    border: none !important; /* ç¢ºä¿ç„¡é‚Šæ¡† */
    vertical-align: baseline !important; /* å°é½ŠåŸºæº–ç·š */
    letter-spacing: 0.2px !important; /* è¼•å¾®å­—è· */
    margin: 0 2px; /* çµ±ä¸€é‚Šè· */
}

/*
==================================================
 ç­†è¨˜åµŒå…¥ (Note Embeds) æ¨£å¼
==================================================
*/

/* çµ±ä¸€éš±è— markdown åµŒå…¥æ¨™é¡Œ (è£¸éœ²åµŒå…¥æ•ˆæœ) */
.markdown-embed-title {
    display: none;
}

/* æ ¹æ“š alt å±¬æ€§æ§åˆ¶æ¨™é¡Œå¤§å° */
.internal-embed:is([alt~=h2]) .markdown-embed-title {
  font-size: var(--h2-size);
  font-weight: var(--h2-weight);
  display: block; /* è¦†è“‹ display: none; */
}

.internal-embed:is([alt~=h1]) .markdown-embed-title {
  font-size: var(--h1-size);
  font-weight: var(--h1-weight);
  display: block; /* è¦†è“‹ display: none; */
}

/* è¨­ç½®åµŒå…¥é€£çµåœ–ç¤º (å³ä¸Šè§’) çš„é¡è‰² */
.markdown-embed-link {
    color: var(--text-faint-color);
}

/* ç‰¹æ®ŠåµŒå…¥æ¨£å¼ (H5 æ¨™é¡Œå¡ç‰‡) */
.markdown-embed:has(.el-h5:is(:only-of-type,:last-child)) {
    background-color: var(--background-primary-alt);
    border-radius: var(--radius-sm);
    border: none;
    padding: 8px;
}
.markdown-embed .el-h5:is(:only-of-type,:last-child) {
    text-align: center;
    & h5 {
        color: var(--color-base-50);
        font-size: 0.875em;
        font-weight: var(--font-medium);
    }
}

/* æª”æ¡ˆåµŒå…¥ (å¦‚ PDF, åœ–ç‰‡ç­‰) çš„é€šç”¨æ¨£å¼ */
.file-embed.mod-generic {
    border-radius: var(--radius-sm);
    font-weight: var(--font-medium);
    --text-muted: var(--color-base-50);
    --text-normal: var(--icon-color);
}

/* æª”æ¡ˆåµŒå…¥çš„æ¨™é¡Œå¾®èª¿ */
.file-embed-title {
    padding-top: 0.125rem;
}

/* èª¿æ•´ inline embed çš„ padding (ä½¿ç”¨é«˜ç‰¹ç•°æ€§è¦†è“‹) */
.markdown-source-view .inline-embed > .markdown-embed-content > .markdown-source-view,
.markdown-preview-view .inline-embed > .markdown-embed-content > .markdown-preview-view {
  padding: 0;
}


/* ===============================================================
   å­—é«”è¨­å®š (Font Settings)
   =============================================================== */
/* å®šç¾©è®Šæ•¸ */
:root {  
  /* é¸é … A (é è¨­): Source Serif 4 - èˆ‡æ€æºå®‹é«”ç³»å‡ºåŒé–€ï¼Œæ•¸å­—æœ€æ•´é½Š */
  --english-font: 'Source Serif 4';
  
  /* é¸é … B: Lora - å¸¶æœ‰æ›¸æ³•ç­†è§¸ï¼Œå„ªé›…ä¸”é©åˆè¢å¹• */
  /* --english-font: 'Lora'; */
  
  /* é¸é … C: PT Serif - å¯¬æ•ç«¯æ­£ï¼Œå­¸è¡“æ„Ÿå¼·ï¼Œå¯è®€æ€§é«˜ */
  /* --english-font: 'PT Serif'; */

  /* å­—é«”å„ªå…ˆé †åºï¼šé¸å®šçš„è‹±æ–‡ -> æ€æºå®‹é«” (ä¸­) -> é è¨­è¥¯ç·š */
  /* åŠ ä¸Š Apple System Font ç­‰æ˜¯ç‚ºäº†åœ¨å°šæœªè¼‰å…¥æ™‚æœ‰è¼ƒå¥½çš„ç³»çµ±é è¨­ */
  --user-font-text: var(--english-font), 'Noto Serif TC', -apple-system, BlinkMacSystemFont, 'Segoe UI', serif !important;
  
  /* æ’ç‰ˆåƒæ•¸ï¼šé«˜è¡Œé«˜èˆ‡å¯¬å­—è·ï¼Œç‡Ÿé€ æ›¸æœ¬é–±è®€æ„Ÿ */
  --line-height-normal: 1.8 !important; 
  --letter-spacing-norm: 0.05em !important;
}

/* æ ¸å¿ƒå€åŸŸï¼šé‡å°ã€Œç­†è¨˜å…§å®¹ã€å¥—ç”¨å®Œæ•´æ¨£å¼ */
/* é–±è®€æ¨¡å¼ (Reading View) */
.markdown-preview-view {
  font-family: var(--user-font-text) !important;
  line-height: var(--line-height-normal) !important;
  letter-spacing: var(--letter-spacing-norm) !important;
}

/* ç·¨è¼¯æ¨¡å¼ (Source Mode / Live Preview) */
.markdown-source-view .cm-scroller {
  font-family: var(--user-font-text) !important;
  line-height: var(--line-height-normal) !important;
  letter-spacing: var(--letter-spacing-norm) !important;
}

/* å¼·åˆ¶ä¿®æ­£æ¸²æŸ“å¾Œçš„æ®µè½èˆ‡åˆ—è¡¨ */
.markdown-rendered p,
.markdown-rendered li,
.markdown-rendered ul,
.markdown-rendered ol {
  font-family: var(--user-font-text) !important;
  letter-spacing: var(--letter-spacing-norm) !important;
  line-height: var(--line-height-normal) !important;
}

/* å…¨åŸŸå€åŸŸï¼šé‡å°ã€ŒApp ä»‹é¢ã€å¥—ç”¨å®‰å…¨æ¨£å¼ */
body, .app-container {
  font-family: var(--user-font-text) !important;
}

/* æ¨™é¡Œèˆ‡å¼·èª¿æ¨£å¼ */
h1, h2, h3, h4, h5, h6, strong, b {
  font-family: var(--user-font-text) !important;
  font-weight: 700 !important;
}

/* ä¿®æ­£ Metadata (Properties) å€åŸŸå­—é«” */
/* é‡å°æ•´å€‹ Metadata å®¹å™¨ã€æ¨™ç±¤(Key) èˆ‡ å…§å®¹(Value) */
.metadata-properties-title,
.metadata-property-key,
.metadata-property-value,
.text-button-label {
  font-family: var(--user-font-text) !important;
  letter-spacing: var(--letter-spacing-norm) !important;
}

/* ä¿®æ”¹ Graph View (é—œè¯åœ–) çš„å­—é«” */
.graph-view.view-master {
    font-family: var(--user-font-text) !important;
}

/* å¦‚æœä½ ä¹Ÿæƒ³æ”¹ã€Œå±€éƒ¨é—œè¯åœ– (Local Graph)ã€çš„å­—é«”ï¼Œè«‹åŠ ä¸Šé€™æ®µ */
.workspace-leaf-content[data-type="localgraph"] .graph-view.view-master {
    font-family: var(--user-font-text) !important;
}